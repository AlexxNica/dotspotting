{include file='inc_head.txt'}

<h2>Dots</h2>

{if $dots|@count == 0}

{if $user.id != $cfg.user.id}
<p>{$user.username|escape} hasn't uploaded any dots yet.</p>
{else}
<p>You haven't uploaded any dots yet.</p>
{/if}

{else}

<table>
	<thead>
		<tr>
			<th>ID</th>
			<th>Bucket</th>
			<th>Latitude</th>
			<th>Longitude</th>
			<th>Geohash</th>
			<th>Created</th>
			{if $is_own}
			<th>Imported</th>
			<th>Permissions</th>
			<th>Geocoded By</th>
			{/if}
			<th>Extras</th>
		</tr>
	</thead>
	<tbody>
		{foreach from=$dots item=dot}
		{assign var="perms" value=$dot.perms}
		{assign var="geocoded_by" value=$dot.geocoded_by}
			<tr class="dot_{$permissions_map.$perms|escape}">
				<td><a href="{$dot|@urls_url_for_dot}">{$dot.id|escape}</a></td>
				<td><a href="{$dot.bucket|@urls_url_for_bucket}">{if $dot.bucket.label}{$dot.bucket.label|escape}{else}{$dot.bucket_id|escape}{/if}</a></td>
				<td>{$dot.latitude|escape}</td>
				<td>{$dot.longitude|escape}</td>
				<td>{$dot.geohash|escape}</td>
				<td>{if $dot.created}{$dot.created|date_format:"%Y-%m-%d %H:%M"|escape}{else}&#8212;{/if}</td>
				{if $is_own}
				<td>{$dot.imported|date_format:"%Y-%m-%d %H:%M"|escape}</td>
				<td>{$permissions_map.$perms|escape}</td>
				<td>{if $geocoded_by}{$geocoder_map.$geocoded_by|escape}{else}&#160;{/if}</td>
				{/if}
				<td>{$dot.extras|@array_keys|@join:", "|escape}</td>
			</tr>
		{/foreach}
	</tbody>
</table>

{pagination}

{/if}

{include file='inc_foot.txt'}
